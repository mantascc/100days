<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100 Days Project Query</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #0a0a0a;
            --surface: #141414;
            --border: #2a2a2a;
            --text-primary: #ffffff;
            --text-secondary: #a8aab8;
            --text-tertiary: #666666;
            --accent: #00a8ff;
        }

        body {
            background: var(--bg);
            color: var(--text-secondary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            font-size: 13px;
            line-height: 1.5;
            padding: 40px 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 32px;
        }

        h1 {
            font-size: 20px;
            color: var(--text-primary);
            font-weight: 500;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .subtitle {
            color: var(--text-tertiary);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .search-panel {
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 20px;
            margin-bottom: 24px;
        }

        .search-row {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .search-row:last-child {
            margin-bottom: 0;
        }

        input, select {
            background: var(--bg);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 8px 12px;
            font-size: 12px;
            font-family: inherit;
            flex: 1;
        }

        input:focus, select:focus {
            outline: none;
            border-color: var(--accent);
        }

        button {
            background: var(--surface);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 8px 16px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            cursor: pointer;
            transition: all 100ms linear;
        }

        button:hover {
            background: var(--bg);
            border-color: var(--text-tertiary);
        }

        .stats {
            display: flex;
            gap: 24px;
            margin-bottom: 24px;
            font-size: 11px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .stat-value {
            color: var(--text-primary);
            margin-left: 8px;
        }

        .results {
            display: grid;
            gap: 16px;
        }

        .project-card {
            background: var(--surface);
            border: 1px solid var(--border);
            padding: 16px;
            transition: border-color 100ms linear;
        }

        .project-card:hover {
            border-color: var(--text-tertiary);
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 8px;
        }

        .project-title {
            font-size: 14px;
            color: var(--text-primary);
            font-weight: 500;
        }

        .project-day {
            font-size: 10px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.08em;
        }

        .project-idea {
            color: var(--text-secondary);
            font-size: 12px;
            margin-bottom: 12px;
            font-style: italic;
        }

        .project-concepts {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
            flex-wrap: wrap;
        }

        .concept-tag {
            font-size: 10px;
            padding: 4px 8px;
            background: var(--bg);
            border: 1px solid var(--border);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .concept-tag.primary {
            border-color: var(--accent);
            color: var(--accent);
        }

        .project-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .tag {
            font-size: 10px;
            color: var(--text-tertiary);
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-size: 11px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-tertiary);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>100 Days Project Query</h1>
            <div class="subtitle">Search and filter projects by concept, tag, or keyword</div>
        </header>

        <div class="search-panel">
            <div class="search-row">
                <input type="text" id="searchInput" placeholder="Search by keyword, tag, or project name...">
                <select id="conceptFilter">
                    <option value="">All Concepts</option>
                    <option value="network">Network</option>
                    <option value="clustering">Clustering</option>
                    <option value="statistical">Statistical</option>
                    <option value="temporal">Temporal</option>
                    <option value="spatial">Spatial</option>
                    <option value="audio">Audio</option>
                    <option value="visual">Visual</option>
                    <option value="emergence">Emergence</option>
                </select>
                <button id="searchBtn">Search</button>
                <button id="clearBtn">Clear</button>
            </div>
        </div>

        <div class="stats">
            <div>
                <span>Total Projects:</span>
                <span class="stat-value" id="totalCount">0</span>
            </div>
            <div>
                <span>Showing:</span>
                <span class="stat-value" id="showingCount">0</span>
            </div>
        </div>

        <div id="results" class="results">
            <div class="loading">Loading projects...</div>
        </div>
    </div>

    <script>
        // Project data will be loaded from interface.md files
        let projects = [];

        // Parse interface.md content
        function parseInterfaceMd(content, dayNum) {
            const lines = content.split('\n');
            const project = {
                day: dayNum,
                title: '',
                idea: '',
                description: '',
                primaryConcept: '',
                secondaryConcept: '',
                conceptualTags: [],
                technicalTags: [],
                stack: [],
                notes: []
            };

            // Extract title from first line
            const titleMatch = content.match(/^#\s+Day\s+\d+:\s+(.+)$/m);
            if (titleMatch) project.title = titleMatch[1];

            // Extract idea
            const ideaMatch = content.match(/##\s+Idea\s*\n([^\n]+)/);
            if (ideaMatch) project.idea = ideaMatch[1].trim();

            // Extract primary concept
            const primaryMatch = content.match(/\*\*Primary\*\*:\s+(.+?)(?:\n|$)/);
            if (primaryMatch) project.primaryConcept = primaryMatch[1].trim();

            // Extract secondary concept
            const secondaryMatch = content.match(/\*\*Secondary\*\*:\s+(.+?)(?:\n|$)/);
            if (secondaryMatch) project.secondaryConcept = secondaryMatch[1].trim();

            // Extract conceptual tags
            const conceptualTagsMatch = content.match(/##\s+Conceptual Tags\s*\n([^\n]+)/);
            if (conceptualTagsMatch) {
                project.conceptualTags = conceptualTagsMatch[1]
                    .split(/\s+/)
                    .filter(t => t.startsWith('#'))
                    .map(t => t.substring(1));
            }

            // Extract technical tags
            const technicalTagsMatch = content.match(/##\s+Technical Tags\s*\n([^\n]+)/);
            if (technicalTagsMatch) {
                project.technicalTags = technicalTagsMatch[1]
                    .split(/\s+/)
                    .filter(t => t.startsWith('#'))
                    .map(t => t.substring(1));
            }

            return project;
        }

        // Load projects from interface.md files
        async function loadProjects() {
            const dayDirs = [
                'day-1', 'day-2', 'day-3', 'day-4', 'day-5', 'day-6', 'Day-7', 'Day-8',
                'day-9', 'day-10', 'day-11', 'day-12', 'day-13', 'day-14', 'day-15',
                'day-16', 'day-17', 'day-18', 'day-19', 'day-20', 'day-21', 'day-22',
                'day-23', 'day-24', 'day-25', 'day-26', 'day-27', 'day-28', 'day-29',
                'day-31', 'day-32', 'day-33', 'day-34', 'day-35 (flights)', 'day-36',
                'day-38', 'day-39', 'day-40', 'day-41', 'day-42', 'day-43', 'day-44',
                'day-45', 'day-46', 'day-47', 'day-49', 'day-50', 'day-51', 'day-52', 'day-53'
            ];

            projects = [];

            for (const dir of dayDirs) {
                try {
                    const dayNum = parseInt(dir.match(/\d+/)[0]);
                    const response = await fetch(`${dir}/interface.md`);
                    if (response.ok) {
                        const content = await response.text();
                        const project = parseInterfaceMd(content, dayNum);
                        if (project.title) {
                            projects.push(project);
                        }
                    }
                } catch (e) {
                    // Skip missing files
                    console.log(`Skipping ${dir}:`, e.message);
                }
            }

            projects.sort((a, b) => a.day - b.day);
            displayResults(projects);
            updateStats(projects.length, projects.length);
        }

        // Filter projects
        function filterProjects(query, concept) {
            query = query.toLowerCase();

            return projects.filter(p => {
                // Concept filter
                if (concept && !p.primaryConcept.toLowerCase().includes(concept) &&
                    !p.secondaryConcept.toLowerCase().includes(concept)) {
                    return false;
                }

                // Text search
                if (query) {
                    const searchFields = [
                        p.title,
                        p.idea,
                        p.primaryConcept,
                        p.secondaryConcept,
                        ...p.conceptualTags,
                        ...p.technicalTags
                    ].map(s => s.toLowerCase()).join(' ');

                    return searchFields.includes(query);
                }

                return true;
            });
        }

        // Display results
        function displayResults(results) {
            const resultsEl = document.getElementById('results');

            if (results.length === 0) {
                resultsEl.innerHTML = '<div class="no-results">No projects found</div>';
                return;
            }

            resultsEl.innerHTML = results.map(p => `
                <div class="project-card">
                    <div class="project-header">
                        <div class="project-title">${p.title}</div>
                        <div class="project-day">Day ${p.day}</div>
                    </div>
                    <div class="project-idea">${p.idea}</div>
                    <div class="project-concepts">
                        ${p.primaryConcept ? `<div class="concept-tag primary">${p.primaryConcept}</div>` : ''}
                        ${p.secondaryConcept ? `<div class="concept-tag">${p.secondaryConcept}</div>` : ''}
                    </div>
                    <div class="project-tags">
                        ${p.conceptualTags.slice(0, 6).map(t => `<div class="tag">#${t}</div>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Update stats
        function updateStats(total, showing) {
            document.getElementById('totalCount').textContent = total;
            document.getElementById('showingCount').textContent = showing;
        }

        // Event handlers
        document.getElementById('searchBtn').addEventListener('click', () => {
            const query = document.getElementById('searchInput').value;
            const concept = document.getElementById('conceptFilter').value;
            const results = filterProjects(query, concept);
            displayResults(results);
            updateStats(projects.length, results.length);
        });

        document.getElementById('clearBtn').addEventListener('click', () => {
            document.getElementById('searchInput').value = '';
            document.getElementById('conceptFilter').value = '';
            displayResults(projects);
            updateStats(projects.length, projects.length);
        });

        document.getElementById('searchInput').addEventListener('keyup', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('searchBtn').click();
            }
        });

        // Load on start
        loadProjects();
    </script>
</body>
</html>
