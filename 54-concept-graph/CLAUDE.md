# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is an interactive force-directed graph visualization showing the relationships between all 100 Days projects and their data concepts. The entire application is a **single-file HTML** with embedded JavaScript and CSS.

## Architecture

**Single-file application structure:**
- HTML markup with canvas element and UI overlays (info, stats, tooltip, legend)
- Embedded CSS using computational minimalism design system (dark theme, subtle UI)
- Vanilla JavaScript with no external dependencies

**Core visualization logic:**
- Force-directed graph physics simulation with spring forces and repulsion
- Two node types: concept nodes (large, colored) and project nodes (small, gray)
- Data loaded from `concept-graph-data.json` (generated by `../interface-query/generate-concept-graph.js`)

**Key features:**
- Click project nodes to navigate to `../${folderName}/index.html`
- Hover to show tooltips and highlight connections
- Drag nodes to reposition
- Collapsible legend showing project counts per concept
- Pre-simulation (120 steps) for stable initial layout
- Cooling schedule to reduce initial jumpiness

## Data Flow

1. **Data Generation**: `../interface-query/generate-concept-graph.js` parses all `interface.md` files
2. **JSON Output**: Creates `concept-graph-data.json` with projects grouped by concepts
3. **Visualization**: This file loads the JSON and renders interactive graph

## Running the Application

```bash
# Simply open index.html in a browser, or serve with:
python3 -m http.server 8000
# Then navigate to http://localhost:8000
```

**No build process** - static HTML file with no dependencies.

## Data Structure

**concept-graph-data.json contains:**
- `concepts`: Array of 8 data concept categories (Network, Clustering, Statistical, etc.)
- `groups`: Projects grouped by concept with counts
- `projects`: All projects with metadata (day, title, idea, concepts array)

## Physics Parameters

Located at lines ~308-312:
- `SPRING_LENGTH`: 120 (target distance between connected nodes)
- `SPRING_STRENGTH`: 0.008 (spring force multiplier)
- `REPULSION`: 4000 (node-node repulsion force)
- `CENTER_STRENGTH`: 0.0008 (gravity toward center for concept nodes)

## Cooling Schedule

Lines ~314-324:
- Starts at 0.70 damping (very damped, prevents chaos)
- Gradually reduces to 0.92 damping over 200 simulation steps
- Prevents initial "explosion" of nodes when graph loads

## Node Types

**Concept nodes** (lines ~220-242):
- Radius: 10px
- Positioned in circle (radius 250) around canvas center
- Colored by concept category
- Display label and project count on hover

**Project nodes** (lines ~245-270):
- Radius: 3px
- Initially positioned near primary concept with randomness
- Gray by default, white when hovered or connected to hovered concept
- Click to navigate to project folder

## Interaction System

**Mouse events** (lines ~331-451):
- `mousemove`: Updates hover detection, tooltip position, drag handling
- `mousedown`: Initiates drag if hovering over node
- `mouseup`: Ends drag
- `click`: Navigates to project if clicking project node

**getDayFolder()** mapping function (lines ~395-411):
- Maps day numbers (1-54) to folder names (01-entropy, 02-vicsek-model, etc.)
- Used for click navigation

## Rendering

**Drawing order** (lines ~488-560):
1. Clear canvas with dark background (#0a0a0a)
2. Draw all edges (gray lines)
3. Draw highlighted edges if hovering (white, thicker)
4. Draw all nodes (concept nodes larger/colored, project nodes smaller/gray)
5. Highlight hovered/connected nodes

## Code Modifications

When modifying the visualization:
- Physics parameters: lines ~308-312
- Cooling schedule: lines ~314-324
- Node initialization: `initializeGraph()` function at line ~220
- Mouse interaction: lines ~331-451
- Rendering: `render()` function at line ~468
- Day-to-folder mapping: `getDayFolder()` at line ~395

## Dependencies

**None** - Pure vanilla JavaScript with:
- Canvas 2D API for rendering
- Fetch API for loading JSON data
- No frameworks, no build tools, no npm packages

## Design System

Follows computational minimalism aesthetic from `day-43/style-seed.md`:
- Dark backgrounds (#0a0a0a, #141414)
- Subtle borders (#1a1a1a, #2a2a2a)
- Muted text colors (#666, #999, #f5f5f7)
- Minimal UI chrome
- Focus on content over decoration
