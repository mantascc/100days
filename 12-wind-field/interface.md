# Day 12: Wind Field

## Idea
Grid of particles displaced by multi-octave Perlin noise forming animated wind-like flows with embedded text

## Description
This project visualizes wind through a grid of particles displaced by fractal Brownian motion (fBm) using Perlin noise. A regular grid of dots warps and flows according to multi-octave noise functions, creating organic wave-like motion. The text "fin" is embedded within the particle field through pixel-based masking, with text particles colored blue while background particles remain white. A wind slider controls the amplitude, frequency, and time progression of the noise field, allowing real-time adjustment of the visual intensity.

The implementation uses proper Perlin noise with permutation tables, fade curves (6t⁵-15t⁴+10t³), and gradient sampling. Three displacement modes are available: line mode (vertical waves), ocean mode (2D turbulence), and radial mode (emanating from center). The text mask is generated by rendering text to an offscreen canvas and sampling pixel alpha values to determine which grid cells should be colored differently.

## Data Concepts
- **Primary**: Spatial (vector field displacement, grid-based positioning)
- **Secondary**: Statistical (Perlin noise, fractal processes), Visual (text masking, particle rendering)

## Conceptual Tags
#perlin-noise #fractal-brownian-motion #vector-field #flow-field #procedural-animation #noise-functions #text-masking #turbulence

## Technical Tags
#canvas #fbm #permutation-table #offscreen-canvas #real-time-control #gradient-noise

## Stack
- HTML5 Canvas (main and offscreen)
- Vanilla JavaScript
- CSS Grid Layout

## Mechanics
- **Perlin Noise Generation**: 2D Perlin using 512-length permutation table (256 values repeated twice); fade function uses smoothstep derivative 6t⁵-15t⁴+10t³; gradient vectors from 4 corner cases
- **Fractal Brownian Motion**: Sums 3 octaves with persistence 0.5 (amplitude halves) and lacunarity 1.5 (frequency multiplies by 1.5); normalized by max possible amplitude
- **Displacement Modes**:
  - Mode 1 (line): vertical displacement from 1D noise sample across x-axis
  - Mode 2 (ocean): 2D displacement with independent noise for x and y using offset seeds (13.37, 42.42)
  - Mode 3 (radial): polar displacement based on distance from center, applying noise radially
- **Wind Mapping**: Slider (3-10 range) linearly scales amplitude (0-22), frequency (0-0.01), and speed (0-0.012)
- **Text Masking**: Renders text to offscreen canvas at 15% of height; samples pixels into Set for O(1) lookup per frame
- **Grid Layout**: Fixed 8px spacing creates cols×rows grid; each cell displaced independently

## Parameters
- `grid: 8` - Grid cell spacing in pixels
- `size: 2` - Particle render size (2x2 pixels)
- `amplitude: 20` - Maximum displacement distance (wind-controlled, max 22)
- `frequency: 0.009` - Noise sampling frequency (wind-controlled, max 0.01)
- `speed: 0.012` - Time progression rate (wind-controlled, max 0.012)
- `octaves: 3` - Number of noise layers in fBm
- `persistence: 0.5` - Amplitude decay per octave
- `lacunarity: 1.5` - Frequency increase per octave
- `mode: 2` - Displacement mode (1=line, 2=ocean, 3=radial)
- `text: 'fin'` - Embedded text string
- `textScale: 0.15` - Text size as fraction of canvas height
- `wind: 6` - Wind intensity (3-10 slider range)

## Notes
- Implements proper Perlin noise algorithm with Ken Perlin's improved fade function rather than basic interpolated random noise
- The permutation table shuffle uses Fisher-Yates algorithm for uniform randomness
- Ocean mode (mode 2) uses time as third dimension for one axis and spatial position for the other, creating asymmetric but continuous flow
- Text masking uses alpha threshold (>128) to handle antialiasing from monospace bold font
- Wind parameter demonstrates parametric control over multiple coupled values (amplitude, frequency, speed) with single slider
- The Set-based text mask lookup provides O(1) performance for per-particle color decisions
- Mode 3's radial displacement applies noise based on distance from center, then applies result in polar direction
- fBm normalization by max amplitude ensures output stays in [-1, 1] range regardless of octave count
- Grid-based approach with per-cell displacement creates structured chaos - maintains regular spacing while allowing organic motion
- The project demonstrates how noise-based displacement can create readable embedded text through selective coloring
- Frequency values around 0.01 hit sweet spot for visible structure without aliasing at this grid resolution
